(()=>{"use strict";var e={1:(e,t,i)=>{i.r(t)},607:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function n(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.game=t.GameStatus=void 0,i(1);const r=s(i(801)),o=s(i(927)),n=i(382),l=s(i(423)),h=i(84),c=s(i(135)),d=i(557),u=s(i(529)),m=s(i(808)),p=i(792),g=i(107),f=i(928),y=i(409),v=s(i(5)),w=i(865);var T;!function(e){e[e.STARTUP=0]="STARTUP",e[e.IDLE=1]="IDLE",e[e.NEW_TURN=2]="NEW_TURN",e[e.VICTORY=3]="VICTORY",e[e.DEFEAT=4]="DEFEAT"}(T=t.GameStatus||(t.GameStatus={})),t.game=new class{constructor(){this.gameStatus=T.STARTUP,this.masterSeed=0,this.turns=0,this.mapx=80,this.mapy=80,this.canvas=(0,f.ensure)(document.getElementById("screen")),this.ctx=(0,f.ensure)(this.canvas.getContext("2d")),this.ctx.font="12px system-ui",this.fontSize=12,this.ctx.textAlign="center",this.log=new v.default,this.lastKey="",this.depth=0,this.turns=0,this.width=80,this.height=40,this.actors=[],this.map=new l.default(this.mapx,this.mapy),this.camera=new h.Camera,this.camera.setCenter(this.width,this.height)}term(){return a(this,void 0,void 0,(function*(){this.log=new v.default,this.actors=[],this.map=new l.default(this.mapx,this.mapy),this.player=void 0}))}init(e,t=!0){var i;return a(this,void 0,void 0,(function*(){if((0,f.ensure)(this.map).generate(e,this.masterSeed,this.depth),e){let e=0;t&&(e=this.actors.push(new m.default(2,2,"@","hero",y.Colors.HERO))-1,this.player=this.actors[e],this.player.destructible=new g.PlayerDestructible(30,2,"your cadaver"),this.player.attacker=new u.default("1d4"),this.player.ai=new p.PlayerAI,this.player.abilities=new d.Abilities(18,15,10,8,12),this.player.container=new r.default(26),this.player.equipments=new o.default,this.player.fov=new c.default(this.mapx,this.mapy)),(0,f.ensure)(this.player).x=(0,f.ensure)(this.map).startX,(0,f.ensure)(this.player).y=(0,f.ensure)(this.map).startY,null===(i=(0,f.ensure)(this.player).fov)||void 0===i||i.fullClear(),e=this.actors.push(new m.default(0,0,">","stairs",y.Colors.STAIRS))-1,this.stairs=this.actors[e],this.stairs.blocks=!1,this.stairs.fovOnly=!1,this.stairs.x=(0,f.ensure)(this.map).stairsX,this.stairs.y=(0,f.ensure)(this.map).stairsY,this.sendToBack(this.stairs),this.log.add("Welcome stranger!");const a=(0,n.createItem)({name:"leather armor",x:(0,f.ensure)(this.player).x,y:(0,f.ensure)(this.player).y}),s=(0,n.createItem)({name:"hide",x:(0,f.ensure)(this.player).x+1,y:(0,f.ensure)(this.player).y}),l=(0,n.createItem)({name:"handaxe",x:(0,f.ensure)(this.player).x-1,y:(0,f.ensure)(this.player).y});this.actors.push(a),this.actors.push(s),this.actors.push(l)}else this.log.add("Welcome back stranger!");this.gameStatus=T.STARTUP}))}nextLevel(){return a(this,void 0,void 0,(function*(){this.depth++,this.log.add("You take steps down."),this.map=void 0,this.stairs=void 0;const e=this.player;this.actors=Array(),this.map=new l.default(this.mapx,this.mapy),this.init(!0,!1),this.actors.push(e),this.save()}))}newGame(){return a(this,void 0,void 0,(function*(){this.masterSeed=(0,f.float2int)(134217727*Math.random()),this.turns=0,this.depth=1,yield this.term(),yield this.init(!0,!0),yield this.save()}))}continueGame(){return a(this,void 0,void 0,(function*(){if(null!==window.localStorage.getItem("seed")){null===window.localStorage.getItem("version")&&window.localStorage.setItem("version","v0.0.1.12a"),this.masterSeed=parseInt((0,f.ensure)(window.localStorage.getItem("seed"))),this.depth=parseInt((0,f.ensure)(window.localStorage.getItem("depth"))),this.turns=parseInt((0,f.ensure)(window.localStorage.getItem("turns"))),yield this.init(!1);const e=JSON.parse(window.localStorage.getItem("actors")||"[]");for(const t of e){const e=this.actors.push(new m.default(t.x,t.y,t.ch,t.name,t.color))-1;if(t.fov&&(this.actors[e].fov=new c.default(this.mapx,this.mapy),(0,f.ensure)(this.actors[e].fov).mapped=t.fov.mapped),t.container){this.actors[e].container=yield new r.default(26);for(const i of t.container.inventory){const t=(0,f.ensure)(this.actors[e].container).inventory.push(new m.default(i.x,i.y,i.ch,i.name,i.color))-1;(0,f.ensure)(this.actors[e].container).inventory[t]=(0,n.createItem)({name:i.name,x:i.x,y:i.y})}}if(t.equipments){this.actors[e].equipments=new o.default;for(const i of t.equipments.items)(0,f.ensure)(this.actors[e].equipments).add((0,n.createItem)({name:i.name,x:i.x,y:i.y}))}if(t.abilities){const i=t.abilities;this.actors[e].abilities=new d.Abilities(i.str,i.dex,i.con,i.int,i.wis)}t.attacker&&(this.actors[e].attacker=new u.default(t.attacker.power)),t.pickable&&(t.armor||t.weapon?this.actors[e]=(0,n.createItem)({name:t.name,x:t.x,y:t.y}):this.actors[e].create(t)),"stairs"===t.name&&(this.stairs=this.actors[e],this.stairs.fovOnly=!1),"door"===t.name&&(this.actors[e].blocks=t.blocks),t.destructible&&("player"===t.destructible.type&&(this.player=this.actors[e],this.actors[e].destructible=new g.PlayerDestructible(30,2,"player corpse"),this.actors[e].ai=new p.PlayerAI,(0,f.ensure)(this.actors[e].destructible).xp=t.destructible.xp,(0,f.ensure)(this.actors[e].destructible).hp=t.destructible.hp,(0,f.ensure)(this.actors[e].destructible).maxHP=t.destructible.maxHP,(0,f.ensure)(this.actors[e].destructible).defense=t.destructible.defense,(0,f.ensure)(this.actors[e].destructible).corpseName=t.destructible.corpseName),"monster"===t.destructible.type&&(this.actors[e].destructible=new g.MonsterDestructible(1,1,"monster corpse",0),(0,f.ensure)(this.actors[e].destructible).xp=t.destructible.xp,(0,f.ensure)(this.actors[e].destructible).hp=t.destructible.hp,(0,f.ensure)(this.actors[e].destructible).maxHP=t.destructible.maxHP,(0,f.ensure)(this.actors[e].destructible).defense=t.destructible.defense,(0,f.ensure)(this.actors[e].destructible).corpseName=t.destructible.corpseName,this.actors[e].ai=new p.MonsterAI))}}}))}load(){return a(this,void 0,void 0,(function*(){"v0.0.1.12a"!==window.localStorage.getItem("version")&&window.localStorage.clear(),this.menu=new w.Menu,this.menu.clear(),window.localStorage.getItem("depth")&&this.menu.addItem(w.MenuItemCode.CONTINUE,"Continue"),this.menu.addItem(w.MenuItemCode.NEW_GAME,"New Game");let e=0,t=-1;for(;;){this.clear(),this.drawChar(">",this.width/2-12,10+e,y.Colors.MENU_CURSOR);for(let e=0;e<this.menu.items.length;e++)this.drawText(this.menu.items[e].label,this.width/2-10,10+e);const i=yield this.getch();if("ArrowDown"===i&&e++,"ArrowUp"===i&&e--,"Enter"===i){t=this.menu.items[e].code;break}e%=this.menu.items.length,e<0&&(e=this.menu.items.length-1)}-1!=t&&(t===w.MenuItemCode.NEW_GAME&&(yield this.newGame()),t===w.MenuItemCode.CONTINUE&&(yield this.continueGame()))}))}save(){return a(this,void 0,void 0,(function*(){const e=(0,f.ensure)(this.player);(0,f.ensure)(e.destructible).isDead()?window.localStorage.clear():((0,f.ensure)(this.map).save(),window.localStorage.setItem("playerID",this.actors.indexOf(e).toString()),window.localStorage.setItem("turns",this.turns.toString()),window.localStorage.setItem("actors",JSON.stringify(this.actors)),window.localStorage.setItem("version","v0.0.1.12a"))}))}clear(e=y.Colors.BACKGROUND){this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width*this.fontSize,this.height*this.fontSize),this.ctx.fillRect(0,this.height*this.fontSize,this.width*this.fontSize,this.canvas.height-this.height*this.fontSize)}saveImage(){const e=this.width,t=this.height,i=this.camera.x,a=this.camera.y;this.width=this.mapx,this.height=this.mapy,this.canvas=(0,f.ensure)(document.getElementById("temp-image")),this.ctx=(0,f.ensure)(this.canvas.getContext("2d")),this.ctx.canvas.width=this.mapx*this.fontSize,this.ctx.canvas.height=this.mapy*this.fontSize,this.camera.x=0,this.camera.y=0,this.clear(),(0,f.ensure)(this.map).render();for(let e=0;e<this.actors.length;e++)this.actors[e].render();this.canvas=(0,f.ensure)(document.getElementById("screen")),this.ctx=(0,f.ensure)(this.canvas.getContext("2d")),this.width=e,this.height=t,this.camera.x=i,this.camera.y=a}drawChar(e,t,i,a=y.Colors.BACKGROUND){t<0||i<0||t>this.width||i>this.height||(this.ctx.textAlign="center",this.ctx.fillStyle=y.Colors.BACKGROUND,this.ctx.fillRect(t*this.fontSize-this.fontSize/2,i*this.fontSize,this.fontSize,this.fontSize),this.ctx.fillStyle=a,this.ctx.fillText(e,t*this.fontSize,i*this.fontSize+this.fontSize))}drawText(e,t,i,a=y.Colors.DEFAULT_TEXT){this.ctx.textAlign="left",this.ctx.fillStyle=y.Colors.BACKGROUND,this.ctx.fillStyle=a,this.ctx.fillText(e,t*this.fontSize,i*this.fontSize+this.fontSize)}run(){return a(this,void 0,void 0,(function*(){for((0,f.debugInit)();;)for(yield this.load(),yield this.gameloop(),yield this.save(),this.log.add("Press Esc to restart"),this.render();"Escape"!==(yield this.getch()););}))}waitingKeypress(){return new Promise((e=>{document.addEventListener("keydown",(function i(a){a.preventDefault(),0!==a.keyCode&&(document.removeEventListener("keydown",i),t.game.lastKey=a.key,e())}))}))}getch(){return a(this,void 0,void 0,(function*(){yield this.waitingKeypress();const e=this.lastKey;return this.lastKey="",e}))}render(){this.clear(),(0,f.ensure)(this.map).render();for(let e=0;e<this.actors.length;e++)this.actors[e].render();this.renderUI()}renderUI(){var e,t,i,a,s,r,o,n,l;for(let e=0;e<this.width;e++)this.drawChar("-",e,this.height,y.Colors.MENU_BORDER);const h=(0,f.ensure)(this.player),c=(0,f.ensure)(null===(e=h.destructible)||void 0===e?void 0:e.hp),u=null===(t=h.destructible)||void 0===t?void 0:t.defense,m=null===(i=h.attacker)||void 0===i?void 0:i.power,p=(0,f.ensure)(null===(a=h.destructible)||void 0===a?void 0:a.maxHP),g=(0,f.ensure)(this.map).depth,v=(0,f.ensure)(this.turns),w=null===(s=h.destructible)||void 0===s?void 0:s.xp;this.drawText("HP: "+c+"/"+p,1,this.height+1,c<p/100*10?y.Colors.HP_10_PERCENT:c<p/100*25?y.Colors.HP_25_PERCENT:c<p/100*50?y.Colors.HP_50_PERCENT:c<p/100*95?y.Colors.HP_95_PERENT:y.Colors.HP_MAX),this.drawText("ATT: "+m,7,this.height+1),this.drawText("AC: "+u,13,this.height+1),this.drawText("Depth: "+g,this.width-6,this.height+1),this.drawText("Turn: "+v,this.width-6,this.height+2),this.drawText("EXP: "+w+" / "+(null===(r=h.ai)||void 0===r?void 0:r.getNextLevelXP()),1,this.height+2);const T=null===(o=this.player)||void 0===o?void 0:o.abilities;this.drawText(`STR: ${null==T?void 0:T.str} (${null==T?void 0:T.getBonusWithSign(d.ABILITIES.STR)})`,19,this.height+1),this.drawText(`DEX: ${null==T?void 0:T.dex} (${null==T?void 0:T.getBonusWithSign(d.ABILITIES.DEX)})`,27,this.height+1),this.drawText(`CON: ${null==T?void 0:T.con} (${null==T?void 0:T.getBonusWithSign(d.ABILITIES.CON)})`,35,this.height+1),this.drawText(`INT: ${null==T?void 0:T.int} (${null==T?void 0:T.getBonusWithSign(d.ABILITIES.INT)})`,43,this.height+1),this.drawText(`WIS: ${null==T?void 0:T.wis} (${null==T?void 0:T.getBonusWithSign(d.ABILITIES.WIS)})`,51,this.height+1),this.log.render(),this.drawText("Weared",this.width-20,this.height+3);let b=0;if(h.equipments&&(null===(n=h.equipments)||void 0===n?void 0:n.items.length)>0)for(const e of(0,f.ensure)(null===(l=h.equipments)||void 0===l?void 0:l.items))this.drawText(e.name,this.width-20,this.height+4+b),b++}gameloop(){var e,t,i,s,r,o;return a(this,void 0,void 0,(function*(){for(;;){if(this.gameStatus===T.STARTUP&&(null===(e=this.player)||void 0===e||e.computeFov(),this.camera.compute((0,f.ensure)(null===(t=this.player)||void 0===t?void 0:t.x),(0,f.ensure)(null===(i=this.player)||void 0===i?void 0:i.y)),this.render()),this.gameStatus=T.IDLE,yield null===(s=this.player)||void 0===s?void 0:s.update(),this.gameStatus===T.NEW_TURN){for(const e of this.actors)e!==this.player&&(yield e.update());this.turns++}if(this.render(),this.gameStatus===T.DEFEAT){this.drawText("DEFEAT!",this.width/2-3,this.height/2,y.Colors.DEFEAT),this.log.add("DEFEAT",y.Colors.DEFEAT),null===(o=null===(r=this.player)||void 0===r?void 0:r.fov)||void 0===o||o.showAll(),this.saveImage();break}}}))}removeActor(e){for(let t=0;t<this.actors.length;t++)if(this.actors[t]===e)return void this.actors.splice(t,1)}sendToBack(e){this.removeActor(e),this.actors.unshift(e)}getClosestMonster(e,t,i){let a=null,s=1e5;for(const r of this.actors)if(r!=this.player&&r.destructible&&!r.destructible.isDead()){const o=r.getDistance(e,t);o<s&&(o<=i||0==i)&&(s=o,a=r)}return a}getActor(e,t){for(const i of this.actors)if(i.x===e&&i.y===t&&i.destructible&&!i.destructible.isDead())return i;return null}getAnyActor(e,t){for(const i of this.actors)if(i.x===e&&i.y===t)return i;return null}pickATile(e,t,i=0){var s,r;return a(this,void 0,void 0,(function*(){let a=e,o=t,n=!1;for(;;){this.render(),(null===(r=null===(s=this.player)||void 0===s?void 0:s.fov)||void 0===r?void 0:r.isInFov(a,o))&&(0==i||this.player.getDistance(a,o)<=i)?(this.drawChar("+",a+this.camera.x,o+this.camera.y,y.Colors.ALLOWED),n=!0):(this.drawChar("+",a+this.camera.x,o+this.camera.y,y.Colors.DISALLOWED),n=!1);const e=yield this.getch();if("ArrowLeft"===e&&a--,"ArrowRight"===e&&a++,"ArrowUp"===e&&o--,"ArrowDown"===e&&o++,"Escape"===e)break;if("Enter"===e&&n)return[!0,a,o]}return[!1,a,o]}))}},t.game.run()},801:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=i(607),s=i(524),r=i(889),o=i(692),n=i(928),l=i(409);t.default=class{constructor(e){this.size=e,this.inventory=[]}add(e){return!(this.size>0&&this.inventory.length>=this.size||(this.inventory.push(e),0))}remove(e){for(let t=0;t<this.inventory.length;t++)if(this.inventory[t]===e)return void this.inventory.splice(t,1)}renderMenuBackground({title:e,x:t,y:i,w:s,h:r}){for(let e=0;e<r;e++)for(let o=0;o<s;o++)(0===e||e===r-1)&&o>0&&o<s-1?a.game.drawChar("-",o+t,e+i,l.Colors.MENU_BORDER):(0===o||o===s-1)&&e>0&&e<r-1?a.game.drawChar("|",o+t,e+i,l.Colors.MENU_BORDER):0===e||0===o||e===r-1||o===s-1?a.game.drawChar("+",o+t,e+i,l.Colors.MENU_BORDER):a.game.drawChar(" ",o+t,e+i,l.Colors.MENU_BORDER);for(let r=0;r<e.length;r++)a.game.drawChar(e.charAt(r),t+s/2-e.length/2+r,i,l.Colors.DEFAULT_TEXT)}render(){var e,t,i,l;this.renderMenuBackground({title:"INVENTORY",x:15,y:4,w:45,h:30});let h="a",c=0;for(const d of this.inventory){a.game.drawText(h+") "+d.name,16,6+c);const u=(0,n.ensure)(d.pickable).weight;a.game.drawText(`${u} lb`,54,6+c),h=String.fromCharCode(h.charCodeAt(0)+1);let m="";if(d.armor&&(d.armor.armorType===r.ArmorType.SHIELD&&(m=`AC: ${d.armor.armorClass}, shield`),d.armor.armorType===r.ArmorType.LIGHT_ARMOR&&(m=`AC: ${d.armor.armorClass}, light armor`),d.armor.armorType===r.ArmorType.MEDIUM_ARMOR&&(m=`AC: ${d.armor.armorClass}, medium armor`),d.armor.armorType===r.ArmorType.HEAVY_ARMOR&&(m=`AC: ${d.armor.armorClass}, heavy armor`)),d.weapon&&(d.weapon.damageType===o.DamageType.BLUDGEONING&&(m=`damage: ${d.weapon.damage}, bludgeoning`),d.weapon.damageType===o.DamageType.PIERCING&&(m=`damage: ${d.weapon.damage}, piercing`),d.weapon.damageType===o.DamageType.SLASHING&&(m=`damage: ${d.weapon.damage}, slashing`)),null===(e=d.pickable)||void 0===e?void 0:e.effect){let e="";"HealthEffect"===d.pickable.effectName&&(e=d.pickable.effect.amount>0?`healing: ${Math.abs(d.pickable.effect.amount)}`:`damage: ${Math.abs(d.pickable.effect.amount)}`),"AiChangeEffect"===d.pickable.effectName&&(e=`confused ${d.pickable.effect.newAi.nbTurns} turns`),"scroll of map"===d.name&&(e="Reveal current map"),m+=`${e}`,(null===(t=d.pickable)||void 0===t?void 0:t.selector)&&(m+=", ")}if(null===(i=d.pickable)||void 0===i?void 0:i.selector){let e="";const t=d.pickable.selector.range;d.pickable.selector.type===s.SelectorType.CLOSEST_MONSTER&&(e="closest enemy"),d.pickable.selector.type===s.SelectorType.SELECTED_MONSTER&&(e="selected monster"),d.pickable.selector.type===s.SelectorType.SELECTED_RANGE&&(e="selected range"),d.pickable.selector.type===s.SelectorType.WEARER_RANGE&&(e="wearer range"),m+=`${e}, range: ${t}`}(null===(l=d.pickable)||void 0===l?void 0:l.effect)&&"Wearable"===d.pickable.effectName&&(d.pickable.effect.type===s.WearableType.ONEHANDED_WEAPON&&(m+=", one-handed"),d.pickable.effect.type===s.WearableType.TWOHANDED_WEAPON&&(m+=", two-handed"),d.pickable.effect.type===s.WearableType.SHIELD&&(m+=", shield"),d.pickable.effect.type===s.WearableType.ARMOR&&(m+=", armor")),a.game.drawText(`${m}`,30,6+c),c++}}}},927:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=i(928);t.default=class{constructor(){this.items=[]}add(e){return this.items.push(e),!0}takeOff(e){var t,i;for(let a=0;a<this.items.length;a++)if((null===(t=this.items[a].pickable)||void 0===t?void 0:t.effect)&&(null===(i=this.items[a].pickable)||void 0===i?void 0:i.effect.type)===e)return this.items.splice(a,1)[0]}getAC(){let e=0;for(const t of this.items)t.armor&&(e+=t.armor.armorClass);return e}getPower(){let e="1d3";for(const t of this.items)t.weapon&&(e=t.weapon.damage);return e}update(e){e.destructible&&((0,a.ensure)(null==e?void 0:e.destructible).defense=this.getAC(),(0,a.ensure)(e.attacker).power=this.getPower())}}},382:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createItem=t.items=t.weapons=t.armors=void 0;const n=o(i(619)),l=o(i(227)),h=o(i(361)),c=r(i(524)),d=r(i(889)),u=r(i(692)),m=o(i(808)),p=i(792),g=i(928),f=i(409);t.armors=n.default,t.weapons=h.default,t.items=l.default,t.createItem=e=>{let i,a,s,r="?",o="#F0F",n=!1,l=d.ArmorType.LIGHT_ARMOR;if((e=>!!t.weapons.find((t=>t.name===e)))(e.name)){const a=(0,g.ensure)((e=>t.weapons.find((t=>t.name===e)))(e.name));let l=u.DamageType.BLUDGEONING,h=c.WearableType.ONEHANDED_WEAPON;"bludgeoning"===a.damageType&&(l=u.DamageType.BLUDGEONING),"slashing"===a.damageType&&(l=u.DamageType.SLASHING),"piercing"===a.damageType&&(l=u.DamageType.PIERCING),"one-handed"===a.wearableType&&(h=c.WearableType.ONEHANDED_WEAPON),"two-handed"===a.wearableType&&(h=c.WearableType.TWOHANDED_WEAPON),s=new u.default({name:e.name,damage:null==a?void 0:a.damage,damageType:l}),r="F",o=f.Colors.WEAPON_ITEM,n=!1,i=new c.default({selector:void 0,effect:new c.Wearable(h),weight:a.weight})}else if((e=>!!t.armors.find((t=>t.name===e)))(e.name)){const s=(0,g.ensure)((e=>t.armors.find((t=>t.name===e)))(e.name));"light"===s.armorType&&(l=d.ArmorType.LIGHT_ARMOR),"medium"===s.armorType&&(l=d.ArmorType.MEDIUM_ARMOR),"heavy"===s.armorType&&(l=d.ArmorType.HEAVY_ARMOR),"shield"===s.armorType&&(l=d.ArmorType.SHIELD),a=new d.default({name:e.name,ac:s.ac,armorClassAbilityType:l===d.ArmorType.HEAVY_ARMOR?"str":"dex",armorType:l,requirementStrenght:0}),r="L",o=f.Colors.ARMOR_ITEM,n=!1,i=new c.default({selector:void 0,effect:new c.Wearable(l===d.ArmorType.SHIELD?c.WearableType.SHIELD:c.WearableType.ARMOR),weight:s.weight})}else if((e=>!!t.items.find((t=>t.name===e)))(e.name)){const a=(0,g.ensure)((e=>t.items.find((t=>t.name===e)))(e.name));let s,l;r=a.ch,o=a.color,n=!1,"selected range"===a.selector.type&&(s=new c.TargetSelector(c.SelectorType.SELECTED_RANGE,a.selector.range)),"selected monster"===a.selector.type&&(s=new c.TargetSelector(c.SelectorType.SELECTED_MONSTER,a.selector.range)),"closest monster"===a.selector.type&&(s=new c.TargetSelector(c.SelectorType.CLOSEST_MONSTER,a.selector.range)),"health"===a.effect.type&&(l=new c.HealthEffect(a.effect.amount,a.message)),"map clear"===a.effect.type&&(l=new c.MapClearEffect(a.message)),"change ai"===a.effect.type&&(l=new c.AiChangeEffect(new p.ConfusedMonsterAi(a.effect.amount),a.message)),i=new c.default({selector:s,effect:l,weight:a.weight})}else console.error(`${name} not found.`);const h=new m.default(e.x,e.y,r,e.name,o);return h.blocks=n,h.pickable=i,h.armor=a,h.weapon=s,h}},524:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function n(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AiChangeEffect=t.HealthEffect=t.Wearable=t.WearableType=t.MapClearEffect=t.TargetSelector=t.SelectorType=void 0;const s=i(607),r=i(928),o=i(409);var n,l;!function(e){e[e.NONE=0]="NONE",e[e.CLOSEST_MONSTER=1]="CLOSEST_MONSTER",e[e.SELECTED_MONSTER=2]="SELECTED_MONSTER",e[e.WEARER_RANGE=3]="WEARER_RANGE",e[e.SELECTED_RANGE=4]="SELECTED_RANGE"}(n=t.SelectorType||(t.SelectorType={})),t.TargetSelector=class{constructor(e,t){this.type=e,this.range=t}selectTargets(e,t){return a(this,void 0,void 0,(function*(){const i=()=>a(this,void 0,void 0,(function*(){const[i,a,r]=yield s.game.pickATile(e.x,e.y);if(void 0===i||!1===i)return;const o=s.game.getActor(a,r);o&&o.destructible&&!o.destructible.isDead()&&o.getDistance(a,r)<=this.range&&t.push(o)})),r=()=>{const i=s.game.getClosestMonster(e.x,e.y,this.range);i&&t.push(i)},o=()=>a(this,void 0,void 0,(function*(){const[i,a,r]=yield s.game.pickATile(e.x,e.y);if(!1===i)return;const o=s.game.getActor(a,r);o&&t.push(o)})),l=()=>{for(const i of s.game.actors)i!=e&&i.destructible&&!i.destructible.isDead()&&i.getDistance(e.x,e.y)<=this.range&&t.push(i)};switch(this.type){case n.CLOSEST_MONSTER:r();break;case n.SELECTED_MONSTER:yield o();break;case n.WEARER_RANGE:l();break;case n.SELECTED_RANGE:yield i();break;default:console.error(`Error with selectorType: ${this.type}`)}0===t.length&&s.game.log.add("No enemy is close enough")}))}},t.MapClearEffect=class{constructor(e){this.message=e}applyTo(e){var t,i,a;return(0,r.ensure)(e),null===(i=null===(t=s.game.player)||void 0===t?void 0:t.fov)||void 0===i||i.showAll(),null===(a=s.game.player)||void 0===a||a.computeFov(),!0}},(l=t.WearableType||(t.WearableType={}))[l.ARMOR=0]="ARMOR",l[l.SHIELD=1]="SHIELD",l[l.ONEHANDED_WEAPON=2]="ONEHANDED_WEAPON",l[l.TWOHANDED_WEAPON=3]="TWOHANDED_WEAPON",t.Wearable=class{constructor(e){this.type=e}applyTo(e){return(0,r.ensure)(e),console.log("apply to:"+e.name),!1}},t.HealthEffect=class{constructor(e,t){this.amount=0,this.amount=e,this.message=t}applyTo(e){if(!e||!e.destructible)return!1;if(this.amount>0){if(e.destructible.heal(this.amount)>0)return this.message&&s.game.log.add(this.message,o.Colors.HEALED),!0}else if(this.message&&-this.amount-e.destructible.defense>0&&s.game.log.add(this.message),e.destructible.takeDamage(e,-this.amount)>0)return!0;return!1}},t.AiChangeEffect=class{constructor(e,t){this.message=t,this.newAi=e}applyTo(e){return this.newAi.applyTo(e),this.message&&s.game.log.add(this.message),!0}},t.default=class{constructor(e){this.selector=null==e?void 0:e.selector,this.effect=null==e?void 0:e.effect,this.weight=null==e?void 0:e.weight,void 0!==this.selector&&(this.selectorName=this.selector.constructor.name),void 0!==this.effect&&(this.effectName=this.effect.constructor.name)}pick(e,t){return!(!t.container||!t.container.add(e)||(s.game.removeActor(e),0))}use(e,t){var i;return a(this,void 0,void 0,(function*(){s.game.log.add(`You use a ${e.name}`);const a=Array();this.selector?yield this.selector.selectTargets(t,a):a.push(t);let r=!1;for(const e of a)(null===(i=this.effect)||void 0===i?void 0:i.applyTo(e))&&(r=!0);return r&&t.container&&t.container.remove(e),r}))}drop(e,t){t.container&&(t.container.remove(e),s.game.actors.push(e),s.game.sendToBack(e),e.x=t.x,e.y=t.y,s.game.log.add(`${t.name} drops a ${e.name}`))}wear(e,t){if((e.armor||e.weapon)&&t.container&&t.equipments&&e.pickable){t.container.remove(e);const i=t.equipments.takeOff(e.pickable.effect.type);t.container&&i&&(s.game.log.add(`take off a ${i.name}`),t.container.add(i)),t.equipments.add(e),s.game.log.add(`${t.name} wear a ${e.name}`),t.equipments.update(t)}}}},10:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(i(705)),r=i(928),o=a(i(451)),n=a(i(357)),l=new o.default;t.default=class{constructor(e,t,i,a,s=5){this.maxLevel=s,this.rootContainer=new n.default(e+1,t+1,i-2,a-2),this.rows=a,this.cols=i,this.map=[],this.doorPlaces=[],this.tempRooms=[];for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++){const i=this.cols*e+t;this.map[i]=1}this.tree=this.Devide(this.rootContainer,0),this.rooms=this.tree.GetLeafs(),this.CreateRooms(),this.ConnectRooms(this.tree)}RandomSplit(e){let t,i,a=!l.getInt(0,1);if(a=e.w>e.h&&e.w/e.h>=.05,a){const a=l.getInt(.3*e.w,.6*e.w);t=new n.default(e.x,e.y,a,e.h),i=new n.default(e.x+a,e.y,e.w-a,e.h)}else{const a=l.getInt(.3*e.h,.6*e.h);t=new n.default(e.x,e.y,e.w,a),i=new n.default(e.x,e.y+a,e.w,e.h-a)}return[t,i]}Devide(e,t){const i=new s.default(e);if(t<this.maxLevel){const a=this.RandomSplit(e);i.A=this.Devide(a[0],t+1),i.B=this.Devide(a[1],t+1)}return i}CreateRooms(){for(const e of this.rooms){const t=l.getInt(.5*e.w,.9*e.w),i=l.getInt(.5*e.h,.9*e.h),a=l.getInt(e.x,e.x+e.w-t),s=l.getInt(e.y,e.y+e.h-i),r=new n.default(a,s,a+t,s+i);this.tempRooms.push(r);for(let e=s;e<s+i;e++)for(let i=a;i<a+t;i++){const t=this.cols*e+i;this.map[t]=0}}}IsThereRoom(e,t){for(const i of this.tempRooms)if(e>=i.x&&t>=i.y&&e<=i.w&&t<=i.h)return!0;return!1}ConnectRooms(e){if(!e.A||!e.B)return!1;const t=(0,r.float2int)(e.A.leaf.GetCenterX()),i=(0,r.float2int)(e.A.leaf.GetCenterY()),a=(0,r.float2int)(e.B.leaf.GetCenterX()),s=(0,r.float2int)(e.B.leaf.GetCenterY());let o=!1,l=!1;for(let e=Math.min(t,a);e<=Math.max(t,a);e++){const t=this.cols*Math.max(i,s)+e;if(this.map[t]=0,o||!0!==this.IsThereRoom(e,Math.max(i,s))){if(!o&&!1===this.IsThereRoom(e,Math.max(i,s))&&!0===l){o=!0;const t=new n.default(e,Math.max(i,s),0,0);this.doorPlaces.push(t)}}else l=!0}o=!1;for(let e=Math.min(i,s);e<=Math.max(i,s);e++){const i=this.cols*e+Math.max(t,a);if(this.map[i]=0,o||!0!==this.IsThereRoom(Math.max(t,a),e)){if(!o&&!1===this.IsThereRoom(Math.max(t,a),e)&&!0===l){o=!0;const i=new n.default(Math.max(t,a),e,0,0);this.doorPlaces.push(i)}}else l=!0}this.ConnectRooms((0,r.ensure)(e.A)),this.ConnectRooms((0,r.ensure)(e.B))}}},705:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(i(357));class r extends s.default{constructor(e){super(e.x,e.y,e.w,e.h),this.A=void 0,this.B=void 0,this.leaf=e}GetLeafs(){return this.A&&this.B?[...this.A.GetLeafs(),...this.B.GetLeafs()]:[this.leaf]}}t.default=r},84:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0,t.Camera=class{constructor(){this.centerX=0,this.centerY=0,this.x=0,this.y=0}setCenter(e,t){this.centerX=e/2,this.centerY=t/2}compute(e,t){this.x=this.centerX-e,this.y=this.centerY-t}}},135:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=i(607),s=i(928);t.default=class{constructor(e,t){this.width=e,this.height=t,this.mapped=new Array(this.width*this.height).fill(0)}clear(){for(let e=0;e<this.width*this.height;e++)2===this.mapped[e]&&(this.mapped[e]=1)}fullClear(){this.mapped=new Array(this.width*this.height).fill(0)}showAll(){var e,t,i,r,o,n,l,h,c;this.mapped=new Array(this.width*this.height).fill(2);for(let d=1;d<this.height-1;d++)for(let u=1;u<this.width-1;u++)if(1==(null===(e=a.game.map)||void 0===e?void 0:e.isWall(u,d))){let e=0;if((null===(t=a.game.map)||void 0===t?void 0:t.isWall(u-1,d))&&e++,(null===(i=a.game.map)||void 0===i?void 0:i.isWall(u+1,d))&&e++,(null===(r=a.game.map)||void 0===r?void 0:r.isWall(u,d-1))&&e++,(null===(o=a.game.map)||void 0===o?void 0:o.isWall(u,d+1))&&e++,(null===(n=a.game.map)||void 0===n?void 0:n.isWall(u-1,d+1))&&e++,(null===(l=a.game.map)||void 0===l?void 0:l.isWall(u+1,d+1))&&e++,(null===(h=a.game.map)||void 0===h?void 0:h.isWall(u-1,d-1))&&e++,(null===(c=a.game.map)||void 0===c?void 0:c.isWall(u+1,d-1))&&e++,e>=8){const e=(0,s.float2int)(u)+(0,s.float2int)(d)*this.width;this.mapped[e]=0}}}compute(e,t,i){var r;this.clear();let o=0,n=0,l=0,h=0;this.mapped[e+t*this.width]=2;for(let c=0;c<360;c++){o=Math.sin(c/3.1415*180),n=Math.cos(c/3.1415*180),l=e+.5,h=t+.5;for(let e=0;e<i&&(l+=o,h+=n,!(l<=0||l>=this.width||h<=0||h>=this.height));e++){const e=(0,s.float2int)(l)+(0,s.float2int)(h)*this.width;if(this.mapped[e]=2,!(null===(r=a.game.map)||void 0===r?void 0:r.canWalk((0,s.float2int)(l),(0,s.float2int)(h))))break}}}getMapped(e,t){return e>=0&&t>=0&&e<this.width&&t<this.height?this.mapped[e+t*this.width]:2}isInFov(e,t){return e>=0&&t>=0&&e<this.width&&t<this.height&&this.mapped[e+t*this.width]>0}}},423:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.random=void 0;const s=i(607),r=i(382),o=a(i(10)),n=i(127),l=a(i(808)),h=i(928),c=i(409),d=a(i(451)),u=a(i(357));t.random=new d.default;class m{constructor(){this.canWalk=!1,this.explored=!1}}t.default=class{constructor(e,t){this.startX=0,this.startY=0,this.stairsX=0,this.stairsY=0,this.levelSeed=0,this.depth=0,this.ROOM_MAX_SIZE=5,this.ROOM_MIN_SIZE=4,this.MAX_ROOM_MONSTERS=3,this.MAX_ROOM_ITEMS=2,this.width=e,this.height=t,this.templateDoors=[],this.tiles=new Array(this.width*this.height).fill(!1)}save(){window.localStorage.setItem("seed",this.levelSeed.toString()),window.localStorage.setItem("depth",this.depth.toString())}isWall(e,t){const i=e+t*this.width;return!this.tiles[i].canWalk}setWall(e,t){this.tiles[e+t*this.width].canWalk=!1}canWalk(e,t){if(this.isWall(e,t))return!1;for(const i of s.game.actors)if(i.x===e&&i.y===t&&i.blocks)return!1;return!0}addMonster(e,i){const a=["bat","rat","jackal","lizard","kobold","giant rat"],r=["giant rat","orc","ghoul"];if(t.random.getInt(0,100)>20){const r=t.random.getInt(0,a.length);s.game.actors.push((0,n.createMonster)(a[r],e,i))}else{const a=t.random.getInt(0,r.length);s.game.actors.push((0,n.createMonster)(r[a],e,i))}}openCloseDoor(e,t){const i=s.game.getAnyActor(e,t);return!(!i||"door"!==i.name||(i.blocks=!i.blocks,i.blocks?(i.ch="D",s.game.log.add("a door is closed")):(i.ch="+",s.game.log.add("a door is opened")),0))}addDoor(e,t,i){const a=new l.default(e,t,i?"D":"+","door",c.Colors.DOOR);a.blocks=!0,(1==this.isWall(e-1,t)&&1==this.isWall(e+1,t)||1==this.isWall(e,t-1)&&1==this.isWall(e,t+1))&&s.game.actors.push(a)}additem(e,i){const a=t.random.getInt(0,100);let o;a<70?t.random.getInt(0,100)<95?o=(0,r.createItem)({name:"health potion",x:e,y:i}):(o=(0,r.createItem)({name:"nutella bun",x:e,y:i}),console.log("Jossain haisoo nutella!")):o=a<80?(0,r.createItem)({name:"scroll of lighting bolt",x:e,y:i}):a<90?(0,r.createItem)({name:"scroll of fireball",x:e,y:i}):a<95?(0,r.createItem)({name:"scroll of confusion",x:e,y:i}):(0,r.createItem)({name:"scroll of map",x:e,y:i}),o&&(s.game.actors.push(o),s.game.sendToBack(o))}dig(e,t,i,a,s){if(e=(0,h.float2int)(e),i=(0,h.float2int)(i),t=(0,h.float2int)(t),i<e){const t=i;i=e,e=t}if((a=(0,h.float2int)(a))<t){const e=a;a=t,t=e}let r=!1;for(let o=e;o<=i;o++)for(let n=t;n<=a;n++){const l=o+n*this.width;0!=this.tiles[l].canWalk||!0!==r||e!==i&&t!==a||s&&o!==this.stairsX&&n!==this.stairsY&&this.templateDoors.push(new u.default(o,n,0,0)),r=this.tiles[l].canWalk,this.tiles[l].canWalk=!0}}addActors(e){let i=t.random.getInt(0,this.MAX_ROOM_MONSTERS),a=t.random.getInt(0,this.MAX_ROOM_ITEMS);const s=e.x,r=e.x+e.w,o=e.y,n=e.y+e.h;for(;i>0;){const e=t.random.getInt(s,r),a=t.random.getInt(o,n);this.canWalk(e,a)&&this.addMonster(e,a),i--}for(;a>0;){const e=t.random.getInt(s,r),i=t.random.getInt(o,n);this.canWalk(e,i)&&this.additem(e,i),a--}}createRoom(e,t,i,a,s){this.dig(e,t,i,a,s)}generate(e,i,a){this.levelSeed=i,this.depth=a,t.random.setSeed(this.levelSeed+25*a);const s=t.random.getInt(4,8);console.log("seed: "+this.levelSeed),console.log("depth: "+this.depth),console.log("split level:"+s);const r=new o.default(0,0,this.width,this.height,s);this.tiles=new Array(this.width*this.height).fill(!1);const n=[],l=t.random.getInt(0,100)>70?1:2;for(let e=0;e<this.width*this.height;e++)this.tiles[e]=new m;let c=0,d=0,p=0,g=0,f=0,y=0;const v=t.random.getInt(0,r.rooms.length-1),w=t.random.getInt(0,r.rooms.length-1);for(let i=0;i<r.rooms.length;i++){const a=r.rooms[i],s=i===v;1===l&&(f=a.w,y=a.h,p=a.x+1,g=a.y+1,this.createRoom(p,g,p+f-2,g+y-2,e),s||n.push(new u.default(p,g,f-2,y-2))),2===l&&(f=t.random.getInt(this.ROOM_MIN_SIZE,a.w-2),y=t.random.getInt(this.ROOM_MIN_SIZE,a.h-2),p=t.random.getInt(a.x,a.x+a.w-f-0)+1,g=t.random.getInt(a.y,a.y+a.h-y-0)+1,this.createRoom(p,g,p+f-2,g+y-2,e),s||n.push(new u.default(p,g,f-2,y-2))),i===v&&(this.startX=p+(0,h.float2int)(f/2),this.startY=g+(0,h.float2int)(y/2)),i===w&&(this.stairsX=(0,h.float2int)(p+f/2),this.stairsY=(0,h.float2int)(g+y/2)),1!==l&&2!==l||(i>0&&(this.dig(c,d,p+f/2,d,e),this.dig(p+f/2,d,p+f/2,g+y/2,e)),c=p+f/2,d=g+y/2)}if(e){for(const e of n)this.addActors(e);for(const e of this.templateDoors)this.addDoor(e.x,e.y,!0)}}render(){var e,t;for(let i=0;i<this.height;i++)for(let a=0;a<this.width;a++){const r=null===(t=null===(e=s.game.player)||void 0===e?void 0:e.fov)||void 0===t?void 0:t.getMapped(a,i),o=a+s.game.camera.x,n=i+s.game.camera.y;2!==r&&1!==r||(2===r?s.game.drawChar(this.isWall(a,i)?"#":".",o,n,c.Colors.WALL):s.game.drawChar(this.isWall(a,i)?"#":".",o,n,c.Colors.WALL_DARK))}}}},557:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Abilities=t.ABILITIES=void 0,function(e){e[e.STR=0]="STR",e[e.DEX=1]="DEX",e[e.CON=2]="CON",e[e.INT=3]="INT",e[e.WIS=4]="WIS"}(i=t.ABILITIES||(t.ABILITIES={})),t.Abilities=class{constructor(e,t,i,a,s){this.str=0,this.dex=0,this.con=0,this.int=0,this.wis=0,this.str=e,this.dex=t,this.con=i,this.int=a,this.wis=s}getBonus(e){let t=0;switch(e){case i.STR:t=this.str;break;case i.DEX:t=this.dex;break;case i.CON:t=this.con;break;case i.INT:t=this.int;break;case i.WIS:t=this.wis}return Math.floor((t-10)/2)}getBonusWithSign(e){const t=this.getBonus(e);return(t>=0?"+":"")+t.toString()}}},889:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ArmorType=void 0,(i=t.ArmorType||(t.ArmorType={}))[i.LIGHT_ARMOR=0]="LIGHT_ARMOR",i[i.MEDIUM_ARMOR=1]="MEDIUM_ARMOR",i[i.HEAVY_ARMOR=2]="HEAVY_ARMOR",i[i.SHIELD=3]="SHIELD",t.default=class{constructor(e){this.name=e.name,this.armorClass=e.ac,this.armorClassAbilityType=e.armorClassAbilityType,this.armorType=e.armorType,this.armorRequirementStrenght=null==e?void 0:e.requirementStrenght}}},529:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function n(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i(607),r=i(557),o=i(792),n=i(928),l=i(409);t.default=class{constructor(e){this.power=e}attack(e,t){return a(this,void 0,void 0,(function*(){this.meleeAttack(e,t)}))}meleeAttack(e,t){if(t.destructible&&!t.destructible.isDead()){const i=o.random.dice(1,20,0),a=(0,n.ensure)(e.abilities).getBonus(r.ABILITIES.STR);let h=!1;if(1===i)return void s.game.log.add(`${t.name} miss attack by ${e.name}`);if(20===i&&(h=!0,s.game.log.add(`${e.name} makes critical attack to ${t.name}!`,l.Colors.HILIGHT_TEXT)),i>=t.destructible.defense){const[i,r]=this.power.split("d");let n=1;const c=o.random.dice(n=!0===h?2*parseInt(i):parseInt(i),parseInt(r),0),d=r;s.game.log.add(`${e.name} attacks ${t.name} for ${c} hit points (${n}d${d}${a>0?"+":"-"}${Math.abs(a)}).`,e===s.game.player?l.Colors.PLAYER_ATTACK:l.Colors.ENEMY_ATTACK);let u=c+a;u<0&&(u=0),t.destructible.takeDamage(t,u)}}}}},127:function(e,t,i){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createMonster=t.monsters=void 0;const s=a(i(109)),r=i(557),o=a(i(529)),n=a(i(808)),l=i(792),h=i(107),c=i(928);t.monsters=s.default,t.createMonster=(e,i,a)=>{let s="1d4",d=0,u=1,m=0,p="?",g="#F0F",f=new r.Abilities(2,2,2,2,2);if((e=>{for(const i of t.monsters)if(i.name===e)return!0;return!1})(e)){const i=(0,c.ensure)((e=>t.monsters.find((t=>t.name===e)))(e));p=i.ch,g=i.color,s=i.attacks[0].damage,m=i.ac,u=i.hp,d=i.xp,f=new r.Abilities(i.abilities.str,i.abilities.dex,i.abilities.con,i.abilities.int,i.abilities.wis)}const y=new n.default(i,a,p,e,g);return y.destructible=new h.MonsterDestructible(u,m,`dead ${e}`,d),y.attacker=new o.default(s),y.ai=new l.MonsterAI,y.abilities=f,y}},692:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DamageType=void 0,(i=t.DamageType||(t.DamageType={}))[i.BLUDGEONING=0]="BLUDGEONING",i[i.PIERCING=1]="PIERCING",i[i.SLASHING=2]="SLASHING",t.default=class{constructor(e){this.name=e.name,this.damage=e.damage,this.damageType=e.damageType}}},808:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},o=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function n(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=i(607),l=r(i(524)),h=i(792),c=i(928);t.default=class{constructor(e,t,i,a,s){this.fovOnly=!0,this.blocks=!0,this.x=(0,c.float2int)(e),this.y=(0,c.float2int)(t),this.ch=i,this.color=s,this.name=a}create(e){var t,i,a,s,r,o;let n;"Wearable"===(null===(t=e.pickable)||void 0===t?void 0:t.effectName)&&(n=new l.Wearable(e.pickable.effect.type)),"AiChangeEffect"===(null===(i=e.pickable)||void 0===i?void 0:i.effectName)&&(n=new l.AiChangeEffect(new h.ConfusedMonsterAi(parseInt(e.pickable.effect.newAi.nbTurns)),e.pickable.effect.message)),"HealthEffect"===(null===(a=null==e?void 0:e.pickable)||void 0===a?void 0:a.effectName)&&(n=new l.HealthEffect(null===(s=e.pickable)||void 0===s?void 0:s.effect.amount,void 0)),(null===(r=null==e?void 0:e.pickable)||void 0===r?void 0:r.selectorName)?this.pickable=new l.default({selector:new l.TargetSelector((0,c.ensure)(e.pickable.selector).type,(0,c.ensure)(e.pickable.selector).range),effect:n,weight:e.pickable.weight}):this.pickable=new l.default({selector:void 0,effect:n,weight:(0,c.ensure)(null===(o=e.pickable)||void 0===o?void 0:o.weight)})}render(){var e,t;const i=null===(t=null===(e=n.game.player)||void 0===e?void 0:e.fov)||void 0===t?void 0:t.getMapped(this.x,this.y);(2===i||0!=i&&!this.fovOnly)&&n.game.drawChar(this.ch,this.x+n.game.camera.x,this.y+n.game.camera.y,this.color)}update(){return o(this,void 0,void 0,(function*(){this.ai&&(yield this.ai.update(this))}))}computeFov(){this.fov&&this.fov.compute(this.x,this.y,10)}getDistance(e,t){const i=this.x-e,a=this.y-t;return Math.sqrt(i*i+a*a)}}},792:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,r){function o(e){try{l(a.next(e))}catch(e){r(e)}}function n(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,n)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfusedMonsterAi=t.TemporaryAI=t.ConfusedAI=t.MonsterAI=t.PlayerAI=t.random=void 0;const r=i(607),o=i(928),n=i(409),l=i(865),h=s(i(451));t.random=new h.default;class c{}t.default=c,t.PlayerAI=class extends c{constructor(){super(),this.xpLevel=1}getNextLevelXP(){return 200+150*this.xpLevel}pickDirection(){return a(this,void 0,void 0,(function*(){const e=yield r.game.getch();let t=0,i=0;return"ArrowLeft"===e&&(t=-1),"ArrowRight"===e&&(t=1),"ArrowUp"===e&&(i=-1),"ArrowDown"===e&&(i=1),[t,i]}))}update(e){var t,i,s;return a(this,void 0,void 0,(function*(){const a=this.getNextLevelXP();if((0,o.ensure)(e.destructible).xp>=a){this.xpLevel++,(0,o.ensure)(e.destructible).xp-=a,r.game.log.add(`Your battle skills grow stronger! You reached level ${this.xpLevel}`,n.Colors.LEVEL_UP),r.game.menu=new l.Menu,r.game.menu.clear(),r.game.menu.addItem(l.MenuItemCode.CONSTITUTION,"Constitution (+20 hp)"),r.game.menu.addItem(l.MenuItemCode.STRENGTH,"Strenght (+1 attack)"),r.game.menu.addItem(l.MenuItemCode.AGILITY,"Agility (+1 defense)");let t=0,i=-1;for(;;){r.game.clear(),r.game.renderUI(),r.game.drawChar(">",r.game.width/2-12,10+t,n.Colors.MENU_CURSOR);for(let e=0;e<r.game.menu.items.length;e++)r.game.drawText(r.game.menu.items[e].label,r.game.width/2-10,10+e);const e=yield r.game.getch();if("ArrowDown"===e&&t++,"ArrowUp"===e&&t--,"Enter"===e){i=r.game.menu.items[t].code;break}t%=r.game.menu.items.length,t<0&&(t=r.game.menu.items.length-1)}-1!=i&&(i===l.MenuItemCode.CONSTITUTION&&((0,o.ensure)(e.destructible).hp+=20,(0,o.ensure)(e.destructible).maxHP+=20),i===l.MenuItemCode.STRENGTH&&((0,o.ensure)(e.attacker).power+=1),i===l.MenuItemCode.AGILITY&&((0,o.ensure)(e.destructible).defense+=1)),r.game.render()}if(e.destructible&&e.destructible.isDead())return;let h=0,c=0;const d=yield r.game.getch();switch(d){case"ArrowLeft":h--;break;case"ArrowRight":h++;break;case"ArrowUp":c--;break;case"ArrowDown":c++;break;default:yield this.handleActionKey(e,d)}0===h&&0===c||(r.game.gameStatus=r.GameStatus.NEW_TURN,(yield this.moveOrAttack(e,e.x+h,e.y+c))&&(null===(t=r.game.player)||void 0===t||t.computeFov(),r.game.camera.compute((0,o.ensure)(null===(i=r.game.player)||void 0===i?void 0:i.x),(0,o.ensure)(null===(s=r.game.player)||void 0===s?void 0:s.y))))}))}handleActionKey(e,t){return a(this,void 0,void 0,(function*(){const i=()=>a(this,void 0,void 0,(function*(){var t,i;r.game.log.add("Which direction?"),r.game.render();const[a,s]=yield this.pickDirection();(null===(t=null===r.game||void 0===r.game?void 0:r.game.map)||void 0===t?void 0:t.openCloseDoor(e.x+a,e.y+s))||r.game.log.add("There is no any door."),null===(i=r.game.player)||void 0===i||i.computeFov(),r.game.gameStatus=r.GameStatus.NEW_TURN})),s=()=>a(this,void 0,void 0,(function*(){r.game.save(),r.game.log.add("Game saved...",n.Colors.GAME_SAVED)})),l=()=>a(this,void 0,void 0,(function*(){r.game.log.add("Use item");const t=yield this.choseFromInventory(e);t?(yield(0,o.ensure)(t.pickable).use(t,e),r.game.gameStatus=r.GameStatus.NEW_TURN):r.game.log.add("Nevermind...")})),h=()=>a(this,void 0,void 0,(function*(){const t=yield this.choseFromInventory(e);t?(yield(0,o.ensure)(t.pickable).drop(t,e),r.game.gameStatus=r.GameStatus.NEW_TURN):r.game.log.add("Nevermind...")})),c=()=>a(this,void 0,void 0,(function*(){const t=yield this.choseFromInventory(e);t?(yield(0,o.ensure)(t.pickable).wear(t,e),r.game.gameStatus=r.GameStatus.NEW_TURN):r.game.log.add("Nevermind...")}));switch(t){case"S":s();break;case">":(null===(d=r.game.stairs)||void 0===d?void 0:d.x)===e.x&&(null===(u=r.game.stairs)||void 0===u?void 0:u.y)===e.y?r.game.nextLevel():r.game.log.add("There are no stairs here.");break;case"g":(()=>{r.game.gameStatus=r.GameStatus.NEW_TURN;let t=!1;for(const i of r.game.actors)if(i.pickable&&i.x===e.x&&i.y===e.y){if(i.pickable.pick(i,e)){t=!0,r.game.log.add(`You pick up the ${i.name}`,n.Colors.PICKED_UP);break}t||(t=!0,r.game.log.add("Your inventory is full.",n.Colors.INVENTORY_FULL))}t||r.game.log.add("There's nothing here that you can pick up.")})();break;case"i":yield l();break;case"d":yield h();break;case"o":yield i();break;case"w":yield c();break;case"f":(()=>{var e,t;null===(t=null===(e=r.game.player)||void 0===e?void 0:e.fov)||void 0===t||t.showAll(),r.game.saveImage()})()}var d,u}))}moveOrAttack(e,t,i){var s;return a(this,void 0,void 0,(function*(){if(null===(s=r.game.map)||void 0===s?void 0:s.isWall(t,i))return!1;let a=!1;for(const a of r.game.actors)if(a.destructible&&!a.destructible.isDead()&&a.x===t&&a.y===i)return yield(0,o.ensure)(e.attacker).attack(e,a),!1;for(const e of r.game.actors)(e.destructible&&e.destructible.isDead||e.pickable||"door"===e.name)&&e.x===t&&e.y===i&&r.game.log.add(`There is a ${e.name} here`),"door"===e.name&&e.blocks&&e.x===t&&e.y===i&&(a=!0);return!a&&(e.x=t,e.y=i,!0)}))}choseFromInventory(e){return a(this,void 0,void 0,(function*(){r.game.clear(),r.game.render(),e.container&&e.container.render();const t=(yield r.game.getch()).charCodeAt(0)-97;return t>=0&&t<(0,o.ensure)(e.container).inventory.length?(0,o.ensure)(e.container).inventory[t]:null}))}},t.MonsterAI=class extends c{constructor(){super(),this.TRACKING_TURNS=3,this.moveCount=0}update(e){var t,i;return a(this,void 0,void 0,(function*(){const a=r.game.player;e.destructible&&e.destructible.isDead()||!a||((null===(i=null===(t=r.game.player)||void 0===t?void 0:t.fov)||void 0===i?void 0:i.isInFov(e.x,e.y))?this.moveCount=this.TRACKING_TURNS:this.moveCount--,this.moveCount>0&&this.moveOrAttack(e,a.x,a.y))}))}moveOrAttack(e,t,i){var a,s,n,l;let h=t-e.x,c=i-e.y;const d=h>0?1:-1,u=c>0?1:-1,m=Math.sqrt(h*h+c*c);m>=2?(h=Math.round(h/m),c=Math.round(c/m),(null===(a=r.game.map)||void 0===a?void 0:a.canWalk(e.x+h,e.y+c))?(e.x+=(0,o.float2int)(h),e.y+=(0,o.float2int)(c)):(null===(s=r.game.map)||void 0===s?void 0:s.canWalk(e.x+d,e.y))?e.x+=(0,o.float2int)(d):(null===(n=r.game.map)||void 0===n?void 0:n.canWalk(e.x,e.y+u))&&(e.y+=(0,o.float2int)(u))):null===(l=null==e?void 0:e.attacker)||void 0===l||l.attack(e,(0,o.ensure)(r.game.player))}},t.ConfusedAI=class extends c{constructor(e,t){super(),this.nbTurns=e,this.oldAi=t}update(e){var i,s;return a(this,void 0,void 0,(function*(){const a=t.random.getInt(-1,1),o=t.random.getInt(-1,1);if(0!==a||0!==o){const t=e.x+a,n=e.y+o;if(null===(i=r.game.map)||void 0===i?void 0:i.canWalk(t,n))e.x=t,e.y=n;else{const i=r.game.getActor(t,n);i&&(null===(s=null==e?void 0:e.attacker)||void 0===s||s.attack(e,i))}}this.nbTurns--,this.nbTurns<=0&&(e.ai=this.oldAi)}))}};class d extends c{constructor(e){super(),this.nbTurns=e}update(e){return a(this,void 0,void 0,(function*(){this.nbTurns--,0===this.nbTurns&&(e.ai=this.oldAi)}))}applyTo(e){this.oldAi=e.ai,e.ai=this}}t.TemporaryAI=d,t.ConfusedMonsterAi=class extends d{constructor(e){super(e)}update(e){const i=Object.create(null,{update:{get:()=>super.update}});var s,o;return a(this,void 0,void 0,(function*(){const a=t.random.getInt(-1,1),n=t.random.getInt(-1,1);if(0!=a||0!=n){const t=e.x+a,i=e.y+n;if(null===(s=r.game.map)||void 0===s?void 0:s.canWalk(t,i))e.x=t,e.y=i;else{const a=r.game.getActor(t,i);a&&(null===(o=null==e?void 0:e.attacker)||void 0===o||o.attack(e,a))}}i.update.call(this,e)}))}}},107:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerDestructible=t.MonsterDestructible=void 0;const a=i(607),s=i(928),r=i(409);class o{constructor(e,t,i,a,s){this.maxHP=e,this.hp=this.maxHP,this.defense=t,this.corpseName=i,this.type=a,this.xp=s}isDead(){return this.hp<=0}heal(e){return this.hp+=e,this.hp>this.maxHP&&(e-=this.hp-this.maxHP,this.hp=this.maxHP),e}takeDamage(e,t){return this.hp-=t,this.hp<=0&&this.die(e),t}die(e){e.color=r.Colors.DEAD_BODY,e.name=this.corpseName,e.blocks=!1,a.game.sendToBack(e)}}t.default=o,t.MonsterDestructible=class extends o{constructor(e,t,i,a){super(e,t,i,"monster",a),this.xp=a}die(e){var t;a.game.log.add(`${e.name} is dead. You gain ${this.xp} xp`),(0,s.ensure)(null===(t=a.game.player)||void 0===t?void 0:t.destructible).xp+=this.xp,super.die(e)}},t.PlayerDestructible=class extends o{constructor(e,t,i){super(e,t,i,"player",0)}die(e){a.game.log.add("You died",r.Colors.DEFEAT),super.die(e),a.game.gameStatus=a.GameStatus.DEFEAT}}},409:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Colors=void 0,t.Colors={BACKGROUND:"#1f273c",WALL:"#8cb2c6",WALL_DARK:"#495c67",DOOR:"#ddc275",HEALTHPOTION:"#FF00FF",NUTELLABUN:"#ddc275",SCROLL_OF_LIGHTING:"#00FFFF",SCROLL_OF_FIREBALL:"#FFAA00",SCROLL_OF_CONFUSION:"#FFFFAA",SCROLL_OF_MAP:"#AAAA22",ARMOR_ITEM:"#99AACC",WEAPON_ITEM:"#33FF33",LEVEL_UP:"#FFFF00",HEALED:"#8F8",MENU_CURSOR:"#AAA",GAME_SAVED:"#0FA",PICKED_UP:"#AAA",INVENTORY_FULL:"#F00",MENU_BORDER:"#AAA",ALLOWED:"#FFF",DISALLOWED:"#F88",HP_10_PERCENT:"#F44",HP_25_PERCENT:"#F88",HP_50_PERCENT:"#FAA",HP_95_PERENT:"#AAA",HP_MAX:"#AFA",HERO:"#FFF",STAIRS:"#FFF",PLAYER_ATTACK:"#DDD",ENEMY_ATTACK:"#AAA",DEAD_BODY:"#A00",DEFAULT_TEXT:"#AAA",HILIGHT_TEXT:"#FFF",DEFEAT:"#A00"}},928:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dimmerColor=t.rgbToHex=t.hexToRGB=t.ensure=t.float2int=t.debugInit=t.printVersionContainer=t.populateVersion=t.paddedLogObject=void 0,t.paddedLogObject=e=>{const t=Object.keys(e).reduce(((e,t)=>t.length+3>e?t.length+3:e),0);console.log(Object.keys(e).map((i=>`${i.padEnd(t," ")}: ${e[i]}`)).join("\n"))},t.populateVersion=()=>"Commit ID: <span>c6f565b</span> | Version: <span>v0.0.1.12a</span>",t.printVersionContainer=()=>{(0,t.ensure)(document.querySelector("#version")).innerHTML=(0,t.populateVersion)()},t.debugInit=()=>{(0,t.printVersionContainer)(),(0,t.paddedLogObject)({BUILD_DATE:"2021-11-01",BUILD_TIME:"11:39:31",BUILD_DATETIME:"2021-11-01T11:39:31.580Z",COMMIT_HASH:"c6f565b",VERSION:"v0.0.1.12a"})},t.float2int=e=>e>>0,t.ensure=(e,t="This value was promised to be there.")=>{if(null==e)throw new TypeError(t);return e},t.hexToRGB=e=>{let t=0,i=0,a=0;return 4==e.length?(t=parseInt(`0x${e[1]}${e[1]}`,16),i=parseInt(`0x${e[2]}${e[2]}`,16),a=parseInt(`0x${e[3]}${e[3]}`,16)):7==e.length&&(t=parseInt(`0x${e[1]}${e[2]}`,16),i=parseInt(`0x${e[3]}${e[4]}`,16),a=parseInt(`0x${e[5]}${e[6]}`,16)),[t,i,a]},t.rgbToHex=(e,t,i)=>"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1),t.dimmerColor=(e,i)=>{let[a,s,r]=(0,t.hexToRGB)(e);return a*=i,s*=i,r*=i,a<0&&(a=0),s<0&&(s=0),r<0&&(r=0),a>255&&(a=255),s>255&&(s=255),r>255&&(r=255),a=(0,t.float2int)(a),s=(0,t.float2int)(s),r=(0,t.float2int)(r),(0,t.rgbToHex)(a,s,r)}},5:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=i(607),s=i(928),r=i(409);class o{constructor(e,t){this.text=e,this.color=t}}t.default=class{constructor(){this.SIZE_OF_LOG=100,this.texts=[]}render(){let e=0,t=this.texts.length;t>10&&(t=10);for(let i=this.texts.length-16;i<this.texts.length;i++)i>=0&&(a.game.drawText(this.texts[i].text,1,a.game.height+3+e,(0,s.dimmerColor)(this.texts[i].color,.05*(20-t))),e++,t--)}add(e,t=r.Colors.DEFAULT_TEXT){this.texts.push(new o(e,t)),this.texts.length>this.SIZE_OF_LOG&&this.texts.splice(0,1)}}},865:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=t.MenuItemCode=t.MenuItem=void 0;class i{constructor(){this.code=0,this.label=""}}var a;t.MenuItem=i,(a=t.MenuItemCode||(t.MenuItemCode={}))[a.NONE=0]="NONE",a[a.NEW_GAME=1]="NEW_GAME",a[a.CONTINUE=2]="CONTINUE",a[a.EXIT=3]="EXIT",a[a.CONSTITUTION=4]="CONSTITUTION",a[a.STRENGTH=5]="STRENGTH",a[a.AGILITY=6]="AGILITY",t.Menu=class{constructor(){this.items=[]}clear(){this.items&&this.items.length>0&&(this.items=[])}addItem(e,t){const a=new i;a.code=e,a.label=t,this.items.push(a)}}},451:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});let i=0;t.default=class{constructor(){this.rnd=0}setSeed(e){i=e}calc(){i=(9301*i+49297)%233280,this.rnd=i/233280}getInt(e,t){return t=t||1,e=e||0,this.calc(),Math.floor(e+this.rnd*(t-e))}dice(e,t,i){let a=0;t++;for(let i=0;i<e;i++)a+=Number(this.getInt(1,t));return a+=+i,a<e&&(a=e),a}}},357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,a){this.x=e,this.y=t,this.w=i,this.h=a}GetHalfDimensionX(){return this.w/2}GetHalfDimensionY(){return this.h/2}GetCenterX(){return this.x+this.GetHalfDimensionX()}GetCenterY(){return this.y+this.GetHalfDimensionY()}}},619:e=>{e.exports=JSON.parse('[{"name":"leather armor","ac":11,"armorType":"light","weight":10},{"name":"studded leather","ac":12,"armorType":"light","weight":13},{"name":"hide","ac":12,"armorType":"medium","weight":12},{"name":"chain shirt","ac":13,"armorType":"medium","weight":20},{"name":"scale mail","ac":14,"armorType":"medium","weight":45},{"name":"breastplate","ac":14,"armorType":"medium","weight":20},{"name":"half plate","ac":15,"armorType":"medium","weight":40},{"name":"ringmail","ac":14,"armorType":"heavy","weight":40},{"name":"chain mail","ac":16,"armorType":"heavy","weight":55},{"name":"splint","ac":17,"armorType":"heavy","weight":60},{"name":"plate","ac":18,"armorType":"heavy","weight":65},{"name":"shield","ac":2,"armorType":"shield","weight":6}]')},227:e=>{e.exports=JSON.parse('[{"name":"health potion","message":"gulp gulp gulp...","ch":"!","color":"#FF00FF","weight":0.1,"selector":{"type":"none","range":0},"effect":{"type":"health","amount":4}},{"name":"nutella bun","message":"omnomnom...","ch":"@","color":"#FF00FF","weight":0.1,"selector":{"type":"none","range":0},"effect":{"type":"health","amount":30}},{"name":"scroll of fireball","message":"Everything burns","ch":"#","color":"#FFAA00","weight":0.05,"selector":{"type":"selected range","range":3},"effect":{"type":"health","amount":-12}},{"name":"scroll of confusion","message":"confused af","ch":"#","color":"#FFCCAA","weight":0.05,"selector":{"type":"selected monster","range":5},"effect":{"type":"change ai","amount":10}},{"name":"scroll of map","message":"All is clear!","ch":"#","color":"#FFAA99","weight":0.05,"selector":{"type":"none","range":0},"effect":{"type":"map clear","amount":0}},{"name":"scroll of lighting bolt","message":"A lighting bolt strikes!","ch":"#","color":"#00CCFF","weight":0.05,"selector":{"type":"closest monster","range":5},"effect":{"type":"health","amount":-20}}]')},109:e=>{e.exports=JSON.parse('[{"name":"bat","size:":"tiny","type":"beast","ch":"b","color":"#888","hp":1,"ac":12,"xp":5,"abilities":{"str":2,"dex":15,"con":8,"int":2,"wis":12},"attacks":[{"name":"bite","damage":"1d1","damageType":"piercing"}]},{"name":"jackal","size:":"small","type":"beast","ch":"j","color":"#888","hp":3,"ac":12,"xp":10,"abilities":{"str":8,"dex":15,"con":11,"int":3,"wis":12},"attacks":[{"name":"bite","damage":"1d4","damageType":"piercing"}]},{"name":"lizard","size:":"tiny","type":"beast","ch":"l","color":"#00AA33","hp":2,"ac":10,"xp":10,"abilities":{"str":2,"dex":11,"con":10,"int":1,"wis":8},"attacks":[{"name":"bite","damage":"1d1","damageType":"piercing"}]},{"name":"kobold","size:":"small","type":"humanoid","ch":"k","color":"#A88","hp":5,"ac":12,"xp":25,"abilities":{"str":7,"dex":15,"con":9,"int":8,"wis":7},"attacks":[{"name":"dagger","damage":"1d4","damageType":"piercing"},{"name":"sling","damage":"1d4","damageType":"bludgeoning"}]},{"name":"rat","size:":"tiny","type":"beast","ch":"r","color":"#888","hp":1,"ac":10,"xp":5,"abilities":{"str":2,"dex":11,"con":9,"int":2,"wis":10},"attacks":[{"name":"bite","damage":"1d1","damageType":"piercing"}]},{"name":"giant rat","size:":"small","type":"beast","ch":"R","color":"#888","hp":7,"ac":12,"xp":25,"abilities":{"str":7,"dex":15,"con":11,"int":2,"wis":10},"attacks":[{"name":"bite","damage":"1d4","damageType":"piercing"}]},{"name":"ghoul","size":"medium","type":"undead","ch":"G","color":"#00AA99","hp":22,"ac":12,"xp":200,"abilities":{"str":13,"dex":15,"con":10,"int":7,"wis":10},"attacks":[{"name":"bite","damage":"2d6","damageType":"piercing"},{"name":"claws","damage":"2d4","damageType":"slashing"}]},{"name":"orc","size":"medium","type":"humanoid","ch":"o","color":"#00AA00","hp":15,"ac":13,"xp":100,"abilities":{"str":16,"dex":12,"con":16,"int":7,"wis":11},"attacks":[{"name":"greataxe","damage":"1d12","damageType":"slashing"},{"name":"javelin","damage":"1d6","damageType":"piercing"}]},{"name":"troll","size":"large","type":"giant","ch":"t","color":"#008800","hp":84,"ac":15,"xp":1800,"abilities":{"str":18,"dex":13,"con":20,"int":7,"wis":9},"attacks":[{"name":"bite","damage":"1d16","damageType":"piercing"},{"name":"claw","damage":"2d6","damageType":"slashing"}]}]')},361:e=>{e.exports=JSON.parse('[{"name":"club","damage":"1d4","damageType":"bludgeoning","weight":2,"wearableType":"one-handed"},{"name":"dagger","damage":"1d4","damageType":"piercing","weight":1,"wearableType":"one-handed"},{"name":"greatclub","damage":"1d4","damageType":"bludgeoning","weight":10,"wearableType":"two-handed"},{"name":"handaxe","damage":"1d6","damageType":"slashing","weight":2,"wearableType":"one-handed"},{"name":"javelin","damage":"1d6","damageType":"piercing","weight":2,"wearableType":"one-handed"},{"name":"light hammer","damage":"1d4","damageType":"bludgeoning","weight":2,"wearableType":"one-handed"},{"name":"mace","damage":"1d6","damageType":"bludgeoning","weight":4,"wearableType":"one-handed"},{"name":"quarterstaff","damage":"1d6","damageType":"bludgeoning","weight":4,"wearableType":"one-handed"},{"name":"spear","damage":"1d6","damageType":"piercing","weight":3,"wearableType":"one-handed"}]')}},t={};function i(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,i),r.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(607)})();